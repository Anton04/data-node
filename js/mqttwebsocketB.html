<html>

<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
<script src="./mqtt.mjs" type="text/javascript"></script>

</head>
<body>

<script type="text/javascript">

// called when a message arrives
function onMessageArrived(message) {
  console.log("*************  " + message.topic)
  console.log("onMessageArrived:"+message.value);
}

function onMessageArrived2(message) {
  console.log("*************  " + message.topic)
  console.log("onMessageArrived:"+message.value);
}

function onMessageArrivedForUnity(message) {
 unityInstance.SendMessage('DataHub', 'onMessage',JSON.stringify(message));
}

//import { DataHub } from "./mqtt.mjs";
//var datahub = new DataHub();
client = datahub.subscribe("ws://op-en.se:9001/test/nodes/test/a2",onMessageArrived)

datahub.subscribe("ws://op-en.se:9001/test/signalA",onMessageArrived)

datahub.subscribe("ws://op-en.se:9001/test/signalA",onMessageArrived2)


window.setTimeout(function () {datahub.unsubscribe("ws://op-en.se:9001/test/signalA",onMessageArrived)}, 10000);


//datahub.subscribe("ws://mqtt.op-en.se:9001/test/signalA",onMessageArrived)



</script>



</body>

</html>
